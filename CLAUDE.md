# Project Context: Salary Hazard Map (時給競争力判定ツール)

## 1. プロジェクト概要
**株式会社バリュースタッフ**（ホテル・ブライダル業界の人材派遣）の社長が、クライアント（ホテル支配人）との商談で使用する「営業支援ツール」。
提示された時給が市場相場に対して「勝てる金額（採用可能）」か「負ける金額（採用困難）」かを、47都道府県別のダッシュボードで視覚化し、単価アップ交渉の根拠とする。

## 2. 技術スタック & 制約
このプロジェクトは**「完全なポータビリティ」**と**「即時利用」**を最優先する。

- **ファイル構成:** 単一のHTMLファイル (`hourlywage.html`) のみ。
- **HTML:** Semantic HTML5。
- **CSS:** Tailwind CSS (CDN経由で読み込み)。カスタムCSSは `<style>` タグ内に最小限記述。
- **JavaScript:** Vanilla JS (ES6+)。ビルド不要、フレームワーク不要。
- **データ:** 外部APIは使用せず、JSオブジェクトとして内部に保持（オフラインでも動作させるため）。
- **画像:** 外部画像ファイルは使用しない。アイコンはSVGコードをインラインで記述。

## 3. ビジネスロジック & 判定基準
ユーザー入力値 (`inputWage`) と、各都道府県の最低賃金 (`min`) および業界係数 (`multiplier`) を用いて判定を行う。

### 変数定義
- **Base Min Wage (`min`):** 都道府県ごとの最低賃金（データ定義済み）。
- **Industry Multiplier:** 業界ごとの相場倍率（プルダウン選択）。
  - ホテル・宿泊: `1.30`
  - レストラン・飲食: `1.15`
  - コンビニ・小売: `1.05`
  - 派遣・高スキル: `1.40`
- **Market Average (`avg`):** `Math.floor(min * multiplier)`

### 判定ステータス
1.  **ILLEGAL (違法):** `inputWage < min`
    - 表示: グレー (Slate) + 右上に「ILLEGAL」バッジ
    - 挙動: カード情報は表示したまま、最低賃金までの差額を表示。
2.  **DANGER (危険):** `min <= inputWage < avg`
    - 表示: 赤 (Rose-500)
    - 意味: 最低賃金は超えているが、市場相場に負けている。応募は見込めない。
3.  **WARNING (注意):** `avg <= inputWage < avg * 1.1`
    - 表示: 黄 (Amber-400)
    - 意味: 相場並み。競合と横並びで埋もれるリスクあり。
4.  **SAFE (安全):** `inputWage >= avg * 1.1`
    - 表示: 緑 (Emerald-500)
    - 意味: 相場より10%以上高く、採用競争力がある。

## 4. データ構造 (Data Schema)
`regions` 配列内にエリア定義と都道府県データを保持する。

```javascript
const regions = [
  {
    name: "エリア名 (例: 関東)",
    prefs: [
      { name: "都道府県名", min: 1163 }, // minは最低賃金(円)
      // ...
    ]
  },
  // ...
];
```

## 5. 実装済み機能
- ダークモード対応（トグルボタン、システム設定連動、LocalStorage保存）
- レスポンシブデザイン（モバイル〜デスクトップ対応）
- 4段階判定の視覚化（SAFE/WARNING/DANGER/ILLEGAL）

## 6. TODO: 最低賃金データ取得ロードマップ

現在のデータは2024年度の最低賃金をハードコーディングしている。以下のフェーズで実データ取得を実装する。

### Phase 1: 手動更新の効率化（優先度: 高）
- [ ] 現在のハードコーディングを外部JSONファイルに分離
- [ ] データ更新日時を表示する機能を追加
- [ ] 2025年度データへの更新（全国加重平均1,121円、全都道府県1,000円超え）

### Phase 2: 自動取得の実装（優先度: 中）
- [ ] e-Stat API（政府統計の総合窓口）のユーザー登録・APIキー取得
  - URL: https://www.e-stat.go.jp/api/
  - JSON/XML/CSV形式でデータ取得可能
- [ ] 最低賃金の統計表IDを特定
- [ ] fetch()でJSONデータを取得するコードを実装
- [ ] LocalStorageにキャッシュし、定期的に更新

### Phase 3: バックエンド連携（優先度: 低・オプション）
- [ ] CORSの問題を回避するため、プロキシサーバーを経由
- [ ] または、GitHub Actionsで定期的にデータを更新しJSONファイルを生成

### オープンデータソース
| ソース | URL | 形式 | 備考 |
|--------|-----|------|------|
| e-Stat API ★推奨 | https://www.e-stat.go.jp/api/ | JSON/XML/CSV | 無料登録でAPI利用可 |
| 厚生労働省 最低賃金特設サイト | https://saiteichingin.mhlw.go.jp/ | HTML | API無し、スクレイピング必要 |
| JILPT 時系列データ | https://www.jil.go.jp/kokunai/statistics/timeseries/html/g0403.html | Excel | 過去データ向け |

### 注意事項
- 最低賃金は毎年10月頃に改定される
- 発効日は都道府県により異なる（10月1日〜1月初旬）
- e-Stat APIの利用規約を確認すること
